{"version":3,"file":"confetti-react.min.js","sources":["../node_modules/tween-functions/index.js","../src/utils.ts","../src/Particle.ts","../src/ParticleGeneratorClass.ts","../src/Confetti.ts","../src/index.tsx"],"sourcesContent":["'use strict';\n\n// t: current time, b: beginning value, _c: final value, d: total duration\nvar tweenFunctions = {\n  linear: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * t / d + b;\n  },\n  easeInQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t + b;\n  },\n  easeOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (t /= d) * (t - 2) + b;\n  },\n  easeInOutQuad: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t + b;\n    } else {\n      return -c / 2 * ((--t) * (t - 2) - 1) + b;\n    }\n  },\n  easeInCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t + b;\n  },\n  easeOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t + 1) + b;\n  },\n  easeInOutCubic: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t + 2) + b;\n    }\n  },\n  easeInQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t + b;\n  },\n  easeOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * ((t = t / d - 1) * t * t * t - 1) + b;\n  },\n  easeInOutQuart: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t + b;\n    } else {\n      return -c / 2 * ((t -= 2) * t * t * t - 2) + b;\n    }\n  },\n  easeInQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * (t /= d) * t * t * t * t + b;\n  },\n  easeOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * ((t = t / d - 1) * t * t * t * t + 1) + b;\n  },\n  easeInOutQuint: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return c / 2 * t * t * t * t * t + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * t * t * t + 2) + b;\n    }\n  },\n  easeInSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * Math.cos(t / d * (Math.PI / 2)) + c + b;\n  },\n  easeOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sin(t / d * (Math.PI / 2)) + b;\n  },\n  easeInOutSine: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c / 2 * (Math.cos(Math.PI * t / d) - 1) + b;\n  },\n  easeInExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==0) ? b : c * Math.pow(2, 10 * (t/d - 1)) + b;\n  },\n  easeOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    return (t==d) ? b+c : c * (-Math.pow(2, -10 * t/d) + 1) + b;\n  },\n  easeInOutExpo: function(t, b, _c, d) {\n    var c = _c - b;\n    if (t === 0) {\n      return b;\n    }\n    if (t === d) {\n      return b + c;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * Math.pow(2, 10 * (t - 1)) + b;\n    } else {\n      return c / 2 * (-Math.pow(2, -10 * --t) + 2) + b;\n    }\n  },\n  easeInCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return -c * (Math.sqrt(1 - (t /= d) * t) - 1) + b;\n  },\n  easeOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    return c * Math.sqrt(1 - (t = t / d - 1) * t) + b;\n  },\n  easeInOutCirc: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d / 2) < 1) {\n      return -c / 2 * (Math.sqrt(1 - t * t) - 1) + b;\n    } else {\n      return c / 2 * (Math.sqrt(1 - (t -= 2) * t) + 1) + b;\n    }\n  },\n  easeInElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return -(a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n  },\n  easeOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d) === 1) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * 0.3;\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    return a * Math.pow(2, -10 * t) * Math.sin((t * d - s) * (2 * Math.PI) / p) + c + b;\n  },\n  easeInOutElastic: function(t, b, _c, d) {\n    var c = _c - b;\n    var a, p, s;\n    s = 1.70158;\n    p = 0;\n    a = c;\n    if (t === 0) {\n      return b;\n    } else if ((t /= d / 2) === 2) {\n      return b + c;\n    }\n    if (!p) {\n      p = d * (0.3 * 1.5);\n    }\n    if (a < Math.abs(c)) {\n      a = c;\n      s = p / 4;\n    } else {\n      s = p / (2 * Math.PI) * Math.asin(c / a);\n    }\n    if (t < 1) {\n      return -0.5 * (a * Math.pow(2, 10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p)) + b;\n    } else {\n      return a * Math.pow(2, -10 * (t -= 1)) * Math.sin((t * d - s) * (2 * Math.PI) / p) * 0.5 + c + b;\n    }\n  },\n  easeInBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * (t /= d) * t * ((s + 1) * t - s) + b;\n  },\n  easeOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    return c * ((t = t / d - 1) * t * ((s + 1) * t + s) + 1) + b;\n  },\n  easeInOutBack: function(t, b, _c, d, s) {\n    var c = _c - b;\n    if (s === void 0) {\n      s = 1.70158;\n    }\n    if ((t /= d / 2) < 1) {\n      return c / 2 * (t * t * (((s *= 1.525) + 1) * t - s)) + b;\n    } else {\n      return c / 2 * ((t -= 2) * t * (((s *= 1.525) + 1) * t + s) + 2) + b;\n    }\n  },\n  easeInBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    v = tweenFunctions.easeOutBounce(d - t, 0, c, d);\n    return c - v + b;\n  },\n  easeOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    if ((t /= d) < 1 / 2.75) {\n      return c * (7.5625 * t * t) + b;\n    } else if (t < 2 / 2.75) {\n      return c * (7.5625 * (t -= 1.5 / 2.75) * t + 0.75) + b;\n    } else if (t < 2.5 / 2.75) {\n      return c * (7.5625 * (t -= 2.25 / 2.75) * t + 0.9375) + b;\n    } else {\n      return c * (7.5625 * (t -= 2.625 / 2.75) * t + 0.984375) + b;\n    }\n  },\n  easeInOutBounce: function(t, b, _c, d) {\n    var c = _c - b;\n    var v;\n    if (t < d / 2) {\n      v = tweenFunctions.easeInBounce(t * 2, 0, c, d);\n      return v * 0.5 + b;\n    } else {\n      v = tweenFunctions.easeOutBounce(t * 2 - d, 0, c, d);\n      return v * 0.5 + c * 0.5 + b;\n    }\n  }\n};\n\nmodule.exports = tweenFunctions;\n","import { Point } from './Point';\nimport { Rect } from './Rect';\nimport { Circle } from './CircleClass';\n\nexport function norm(value: number, min: number, max: number) {\n  return (value - min) / (max - min);\n}\n\nexport function lerp(lnorm: number, min: number, max: number) {\n  return (max - min) * lnorm + min;\n}\n\nexport function map(value: number, sourceMin: number, sourceMax: number, destMin: number, destMax: number) {\n  return lerp(norm(value, sourceMin, sourceMax), destMin, destMax);\n}\n\nexport function clamp(value: number, min: number, max: number) {\n  return Math.min(Math.max(value, Math.min(min, max)), Math.max(min, max));\n}\n\nexport function distance(p0: Point, p1: Point) {\n  const dx = p1.x - p0.x;\n  const dy = p1.y - p0.y;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function distanceXY(x0: number, y0: number, x1: number, y1: number) {\n  const dx = x1 - x0;\n  const dy = y1 - y0;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nexport function circleCollision(c0: Circle, c1: Circle) {\n  return distance(c0, c1) <= c0.radius + c1.radius;\n}\n\nexport function circlePointCollision(x: number, y: number, circle: Circle) {\n  return distanceXY(x, y, circle.x, circle.y) < circle.radius;\n}\n\nexport function inRange(value: number, min: number, max: number) {\n  return value >= Math.min(min, max) && value <= Math.max(min, max);\n}\n\nexport function pointInRect(p: Point, rect: Rect) {\n  return inRange(p.x, rect.x, rect.x + rect.w) && inRange(p.y, rect.y, rect.y + rect.h);\n}\n\nexport function rangeIntersect(min0: number, max0: number, min1: number, max1: number) {\n  return Math.max(min0, max0) >= Math.min(min1, max1) && Math.min(min0, max0) <= Math.max(min1, max1);\n}\n\nexport function rectIntersect(r0: Rect, r1: Rect) {\n  return rangeIntersect(r0.x, r0.x + r0.w, r1.x, r1.x + r1.w) && rangeIntersect(r0.y, r0.y + r0.h, r1.y, r1.y + r1.h);\n}\n\nexport function degreesToRads(degrees: number) {\n  return (degrees * Math.PI) / 180;\n}\n\nexport function radsToDegrees(radians: number) {\n  return (radians * 180) / Math.PI;\n}\n\nexport function randomRange(min: number, max: number) {\n  return min + Math.random() * (max - min);\n}\n\nexport function randomInt(min: number, max: number) {\n  return Math.floor(min + Math.random() * (max - min + 1));\n}\n","import { randomRange, randomInt, degreesToRads } from './utils';\nimport { ConfettiOptions } from './Confetti';\n\nexport enum ParticleShape {\n  Circle = 0,\n  Square,\n  Strip,\n}\n\nenum RotationDirection {\n  Positive = 1,\n  Negative = -1,\n}\n\nexport default class Particle {\n  constructor(context: CanvasRenderingContext2D, getOptions: () => ConfettiOptions, x: number, y: number) {\n    this.getOptions = getOptions;\n    const { colors, initialVelocityX, initialVelocityY } = this.getOptions();\n    this.context = context;\n    this.x = x;\n    this.y = y;\n    this.w = randomRange(5, 20);\n    this.h = randomRange(5, 20);\n    this.radius = randomRange(5, 10);\n    this.vx = randomRange(-initialVelocityX, initialVelocityX);\n    this.vy = randomRange(-initialVelocityY, 0);\n    this.shape = randomInt(0, 2);\n    this.angle = degreesToRads(randomRange(0, 360));\n    this.angularSpin = randomRange(-0.2, 0.2);\n    this.color = colors[Math.floor(Math.random() * colors.length)];\n    this.rotateY = randomRange(0, 1);\n    this.rotationDirection = randomRange(0, 1) ? RotationDirection.Positive : RotationDirection.Negative;\n  }\n\n  context: CanvasRenderingContext2D;\n\n  radius: number;\n\n  x: number;\n\n  y: number;\n\n  w: number;\n\n  h: number;\n\n  vx: number;\n\n  vy: number;\n\n  shape: ParticleShape;\n\n  angle: number;\n\n  angularSpin: number;\n\n  color: string;\n\n  // Actually used as scaleY to simulate rotation cheaply\n  rotateY: number;\n\n  rotationDirection: RotationDirection;\n\n  getOptions: () => ConfettiOptions;\n\n  update() {\n    const { gravity, wind, friction, opacity, drawShape } = this.getOptions();\n    this.x += this.vx;\n    this.y += this.vy;\n    this.vy += gravity;\n    this.vx += wind;\n    this.vx *= friction;\n    this.vy *= friction;\n    if (this.rotateY >= 1 && this.rotationDirection === RotationDirection.Positive) {\n      this.rotationDirection = RotationDirection.Negative;\n    } else if (this.rotateY <= -1 && this.rotationDirection === RotationDirection.Negative) {\n      this.rotationDirection = RotationDirection.Positive;\n    }\n\n    const rotateDelta = 0.1 * this.rotationDirection;\n\n    this.rotateY += rotateDelta;\n    this.angle += this.angularSpin;\n    this.context.save();\n    this.context.translate(this.x, this.y);\n    this.context.rotate(this.angle);\n    this.context.scale(1, this.rotateY);\n    this.context.rotate(this.angle);\n    this.context.beginPath();\n    this.context.fillStyle = this.color;\n    this.context.strokeStyle = this.color;\n    this.context.globalAlpha = opacity;\n    this.context.lineCap = 'round';\n    this.context.lineWidth = 2;\n    if (drawShape && typeof drawShape === 'function') {\n      drawShape.call(this, this.context);\n    } else {\n      switch (this.shape) {\n        case ParticleShape.Circle: {\n          this.context.beginPath();\n          this.context.arc(0, 0, this.radius, 0, 2 * Math.PI);\n          this.context.fill();\n          break;\n        }\n        case ParticleShape.Square: {\n          this.context.fillRect(-this.w / 2, -this.h / 2, this.w, this.h);\n          break;\n        }\n        case ParticleShape.Strip: {\n          this.context.fillRect(-this.w / 6, -this.h / 2, this.w / 3, this.h);\n          break;\n        }\n        default: {\n          throw new Error('Unknown type in Particle.ts');\n        }\n      }\n    }\n    this.context.closePath();\n    this.context.restore();\n  }\n}\n","import { ConfettiOptions } from './Confetti';\nimport { Rect } from './Rect';\nimport Particle from './Particle';\nimport { randomRange } from './utils';\n\nexport interface ParticleGenerator extends Rect {\n  removeParticleAt: (index: number) => void;\n  getParticle: () => void;\n  animate: () => boolean;\n  particles: Particle[];\n  particlesGenerated: number;\n}\n\nexport default class ParticleGeneratorClass implements ParticleGenerator {\n  constructor(canvas: HTMLCanvasElement, getOptions: () => ConfettiOptions) {\n    this.canvas = canvas;\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Could not get canvas context');\n    }\n    this.context = ctx;\n    this.getOptions = getOptions;\n  }\n\n  canvas: HTMLCanvasElement;\n\n  context: CanvasRenderingContext2D;\n\n  getOptions: () => ConfettiOptions;\n\n  x = 0;\n\n  y = 0;\n\n  w = 0;\n\n  h = 0;\n\n  lastNumberOfPieces = 0;\n\n  tweenInitTime: number = Date.now();\n\n  particles: Particle[] = [];\n\n  particlesGenerated = 0;\n\n  removeParticleAt = (i: number) => {\n    this.particles.splice(i, 1);\n  };\n\n  getParticle = () => {\n    const newParticleX = randomRange(this.x, this.w + this.x);\n    const newParticleY = randomRange(this.y, this.h + this.y);\n    return new Particle(this.context, this.getOptions, newParticleX, newParticleY);\n  };\n\n  animate = (): boolean => {\n    const { canvas, context, particlesGenerated, lastNumberOfPieces } = this;\n    const { run, recycle, numberOfPieces, debug, tweenFunction, tweenDuration } = this.getOptions();\n    if (!run) {\n      return false;\n    }\n\n    const nP = this.particles.length;\n    const activeCount = recycle ? nP : particlesGenerated;\n\n    const now = Date.now();\n\n    // Initial population\n    if (activeCount < numberOfPieces) {\n      // Use the numberOfPieces prop as a key to reset the easing timing\n      if (lastNumberOfPieces !== numberOfPieces) {\n        this.tweenInitTime = now;\n        this.lastNumberOfPieces = numberOfPieces;\n      }\n      const { tweenInitTime } = this;\n      // Add more than one piece per loop, otherwise the number of pieces would\n      // be limitted by the RAF framerate\n      const progressTime = now - tweenInitTime > tweenDuration ? tweenDuration : Math.max(0, now - tweenInitTime);\n      const tweenedVal = tweenFunction(progressTime, activeCount, numberOfPieces, tweenDuration);\n      const numToAdd = Math.round(tweenedVal - activeCount);\n      for (let i = 0; i < numToAdd; i += 1) {\n        this.particles.push(this.getParticle());\n      }\n      this.particlesGenerated += numToAdd;\n    }\n    if (debug) {\n      // Draw debug text\n      context.font = '12px sans-serif';\n      context.fillStyle = '#333';\n      context.textAlign = 'right';\n      context.fillText(`Particles: ${nP}`, canvas.width - 10, canvas.height - 20);\n    }\n\n    // Maintain the population\n    this.particles.forEach((p, i) => {\n      // Update each particle's position\n      p.update();\n      // Prune the off-canvas particles\n      if (p.y > canvas.height || p.y < -100 || p.x > canvas.width + 100 || p.x < -100) {\n        if (recycle && activeCount <= numberOfPieces) {\n          // Replace the particle with a brand new one\n          this.particles[i] = this.getParticle();\n        } else {\n          this.removeParticleAt(i);\n        }\n      }\n    });\n    return nP > 0 || activeCount < numberOfPieces;\n  };\n}\n","import tweens from 'tween-functions';\nimport { Rect } from './Rect';\nimport ParticleGeneratorClass from './ParticleGeneratorClass';\n\nexport interface ConfettiOptions {\n  /**\n   * Width of the component\n   * @default window.width\n   */\n  width: number;\n  /**\n   * Height of the component\n   * @default window.height\n   */\n  height: number;\n  /**\n   * Max number of confetti pieces to render.\n   * @default 200\n   */\n  numberOfPieces: number;\n  /**\n   * Slows movement of pieces. (lower number = slower confetti)\n   * @default 0.99\n   */\n  friction: number;\n  /**\n   * Blows confetti along the X axis.\n   * @default 0\n   */\n  wind: number;\n  /**\n   * How fast it falls (pixels per frame)\n   * @default 0.1\n   */\n  gravity: number;\n  /**\n   * How fast the confetti is emitted horizontally\n   * @default 4\n   */\n  initialVelocityX: number;\n  /**\n   * How fast the confetti is emitted vertically\n   * @default 10\n   */\n  initialVelocityY: number;\n  /**\n   * Array of colors to choose from.\n   */\n  colors: string[];\n  /**\n   * Opacity of the confetti.\n   * @default 1\n   */\n  opacity: number;\n  /**\n   * If false, only numberOfPieces will be emitted and then stops. If true, when a confetto goes offscreen, a new one will be emitted.\n   * @default true\n   */\n  recycle: boolean;\n  /**\n   * If false, stops the requestAnimationFrame loop.\n   * @default true\n   */\n  run: boolean;\n  /**\n   * Renders some debug text on the canvas.\n   * @default false\n   */\n  debug: boolean;\n  /**\n   * A Rect defining the area where the confetti will spawn.\n   * @default {\n   *   x: 0,\n   *   y: 0,\n   *   w: canvas.width,\n   *   h: 0\n   * }\n   */\n  confettiSource: Rect;\n  /**\n   * Controls the rate at which confetti is spawned.\n   * @default easeInOutQuad\n   */\n  tweenFunction: (\n    currentTime: number,\n    currentValue: number,\n    targetValue: number,\n    duration: number,\n    s?: number,\n  ) => number;\n  /**\n   * Number of milliseconds it should take to spawn numberOfPieces.\n   * @default 5000\n   */\n  tweenDuration: number;\n  /**\n   * Function to draw your own confetti shapes.\n   */\n  drawShape?: (context: CanvasRenderingContext2D) => void;\n  /**\n   * Function called when all confetti has fallen off-canvas.\n   */\n  onConfettiComplete?: (confettiInstance?: Confetti) => void;\n}\n\nexport const confettiDefaults: Pick<ConfettiOptions, Exclude<keyof ConfettiOptions, 'confettiSource'>> = {\n  width: typeof window !== 'undefined' ? window.innerWidth : 300,\n  height: typeof window !== 'undefined' ? window.innerHeight : 200,\n  numberOfPieces: 200,\n  friction: 0.99,\n  wind: 0,\n  gravity: 0.1,\n  initialVelocityX: 4,\n  initialVelocityY: 10,\n  colors: [\n    '#f44336',\n    '#e91e63',\n    '#9c27b0',\n    '#673ab7',\n    '#3f51b5',\n    '#2196f3',\n    '#03a9f4',\n    '#00bcd4',\n    '#009688',\n    '#4CAF50',\n    '#8BC34A',\n    '#CDDC39',\n    '#FFEB3B',\n    '#FFC107',\n    '#FF9800',\n    '#FF5722',\n    '#795548',\n  ],\n  opacity: 1.0,\n  debug: false,\n  tweenFunction: tweens.easeInOutQuad,\n  tweenDuration: 5000,\n  recycle: true,\n  run: true,\n};\n\nexport class Confetti {\n  constructor(canvas: HTMLCanvasElement, opts: Partial<ConfettiOptions>) {\n    this.canvas = canvas;\n    const ctx = this.canvas.getContext('2d');\n    if (!ctx) {\n      throw new Error('Could not get canvas context');\n    }\n    this.context = ctx;\n\n    this.generator = new ParticleGeneratorClass(this.canvas, () => this.options as ConfettiOptions);\n    this.options = opts;\n    this.update();\n  }\n\n  canvas: HTMLCanvasElement;\n\n  context: CanvasRenderingContext2D;\n\n  _options!: ConfettiOptions;\n\n  generator: ParticleGeneratorClass;\n\n  rafId?: number;\n\n  get options(): Partial<ConfettiOptions> {\n    return this._options;\n  }\n\n  set options(opts: Partial<ConfettiOptions>) {\n    const lastRunState = this._options && this._options.run;\n    const lastRecycleState = this._options && this._options.recycle;\n    this.setOptionsWithDefaults(opts);\n    if (this.generator) {\n      Object.assign(this.generator, this.options.confettiSource);\n      if (typeof opts.recycle === 'boolean' && opts.recycle && lastRecycleState === false) {\n        this.generator.lastNumberOfPieces = this.generator.particles.length;\n      }\n    }\n    if (typeof opts.run === 'boolean' && opts.run && lastRunState === false) {\n      this.update();\n    }\n  }\n\n  setOptionsWithDefaults = (opts: Partial<ConfettiOptions>) => {\n    const computedConfettiDefaults = {\n      confettiSource: {\n        x: 0,\n        y: 0,\n        w: this.canvas.width,\n        h: 0,\n      },\n    };\n    this._options = {\n      ...computedConfettiDefaults,\n      ...confettiDefaults,\n      ...opts,\n    };\n    Object.assign(this, opts.confettiSource);\n  };\n\n  update = () => {\n    const {\n      options: { run, onConfettiComplete },\n      canvas,\n      context,\n    } = this;\n    if (run) {\n      context.fillStyle = 'white';\n      context.clearRect(0, 0, canvas.width, canvas.height);\n    }\n    if (this.generator.animate()) {\n      this.rafId = requestAnimationFrame(this.update);\n    } else {\n      if (onConfettiComplete && typeof onConfettiComplete === 'function' && this.generator.particlesGenerated > 0) {\n        onConfettiComplete.call(this, this);\n      }\n      this._options.run = false;\n    }\n  };\n\n  reset = () => {\n    if (this.generator && this.generator.particlesGenerated > 0) {\n      this.generator.particlesGenerated = 0;\n      this.generator.particles = [];\n      this.generator.lastNumberOfPieces = 0;\n    }\n  };\n\n  stop = () => {\n    this.options = { run: false };\n    if (this.rafId) {\n      cancelAnimationFrame(this.rafId);\n      this.rafId = undefined;\n    }\n  };\n}\n\nexport default Confetti;\n","import React, { Component, CanvasHTMLAttributes } from 'react';\nimport Confetti, { ConfettiOptions, confettiDefaults } from './Confetti';\n\nconst ref = React.createRef<HTMLCanvasElement>();\n\ninterface Refs {\n  [key: string]: React.Ref<HTMLElement>;\n}\n\nfunction extractCanvasProps(\n  props: Partial<ConfettiOptions> | any,\n): [Partial<ConfettiOptions>, Partial<CanvasHTMLAttributes<HTMLCanvasElement>>, Refs] {\n  const confettiOptions: Partial<ConfettiOptions> = {};\n  const refs: Refs = {};\n  const rest: any = {};\n  const confettiOptionKeys = [...Object.keys(confettiDefaults), 'confettiSource', 'drawShape', 'onConfettiComplete'];\n  const refProps = ['canvasRef'];\n  Object.keys(props).forEach(prop => {\n    const val = props[prop as string];\n    if (confettiOptionKeys.includes(prop)) {\n      confettiOptions[prop] = val;\n    } else if (refProps.includes(prop)) {\n      refProps[prop as any] = val;\n    } else {\n      rest[prop] = val;\n    }\n  });\n  return [confettiOptions, rest, refs];\n}\n\nexport type Props = Partial<ConfettiOptions> &\n  CanvasHTMLAttributes<HTMLCanvasElement> & {\n    canvasRef?: React.Ref<HTMLCanvasElement>;\n  };\n\nclass ConfettiReactInternal extends Component<Props> {\n  static readonly defaultProps = {\n    ...confettiDefaults,\n  };\n\n  static readonly displayName = 'ConfettiReact';\n\n  canvas: React.RefObject<HTMLCanvasElement> = React.createRef();\n\n  confetti?: Confetti;\n\n  constructor(props: Props, ...rest: any[]) {\n    super(props, ...rest);\n    this.canvas = (props.canvasRef as React.RefObject<HTMLCanvasElement>) || ref;\n  }\n\n  componentDidMount() {\n    if (this.canvas.current) {\n      const opts = extractCanvasProps(this.props)[0];\n      this.confetti = new Confetti(this.canvas.current, opts);\n    }\n  }\n\n  componentDidUpdate() {\n    const confettiOptions = extractCanvasProps(this.props)[0];\n    if (this.confetti) {\n      this.confetti.options = confettiOptions as ConfettiOptions;\n    }\n  }\n\n  componentWillUnmount() {\n    if (this.confetti) {\n      this.confetti.stop();\n    }\n    this.confetti = undefined;\n  }\n\n  render() {\n    const [confettiOptions, passedProps] = extractCanvasProps(this.props);\n    const canvasStyles = {\n      zIndex: 2,\n      position: 'absolute' as 'absolute',\n      pointerEvents: 'none' as 'none',\n      top: 0,\n      left: 0,\n      bottom: 0,\n      right: 0,\n      ...passedProps.style,\n    };\n    return (\n      <canvas\n        width={confettiOptions.width}\n        height={confettiOptions.height}\n        ref={this.canvas}\n        {...passedProps}\n        style={canvasStyles}\n      />\n    );\n  }\n}\n\n// eslint-disable-next-line react/display-name\nexport const Index = React.forwardRef<HTMLCanvasElement, Props>((props, _ref) => (\n  <ConfettiReactInternal canvasRef={ref} {...props} />\n));\n\nexport default Index;\n"],"names":["degreesToRads","degrees","Math","PI","randomRange","min","max","random","randomInt","floor","ParticleShape","RotationDirection","Particle","context","getOptions","x","y","radius","w","h","vx","vy","shape","angle","angularSpin","color","rotateY","rotationDirection","colors","initialVelocityX","initialVelocityY","length","Positive","Negative","gravity","wind","friction","opacity","drawShape","rotateDelta","save","translate","rotate","scale","beginPath","fillStyle","strokeStyle","globalAlpha","lineCap","lineWidth","call","Circle","arc","fill","Square","fillRect","Strip","Error","closePath","restore","ParticleGeneratorClass","canvas","lastNumberOfPieces","tweenInitTime","Date","now","particles","particlesGenerated","removeParticleAt","i","splice","getParticle","newParticleX","newParticleY","animate","run","recycle","numberOfPieces","debug","tweenFunction","tweenDuration","nP","activeCount","progressTime","tweenedVal","numToAdd","round","push","font","textAlign","fillText","width","height","forEach","p","update","ctx","getContext","confettiDefaults","window","innerWidth","innerHeight","tweens","easeInOutQuad","Confetti","opts","_options","generator","rafId","setOptionsWithDefaults","computedConfettiDefaults","confettiSource","Object","assign","options","onConfettiComplete","clearRect","requestAnimationFrame","reset","stop","cancelAnimationFrame","undefined","lastRunState","lastRecycleState","ref","React","createRef","extractCanvasProps","props","confettiOptions","refs","rest","confettiOptionKeys","keys","refProps","prop","val","includes","ConfettiReactInternal","confetti","canvasRef","current","passedProps","canvasStyles","zIndex","position","pointerEvents","top","left","bottom","right","style","Component","defaultProps","displayName","Index","forwardRef","_ref"],"mappings":"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"}